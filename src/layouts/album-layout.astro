---
  import "@fontsource/source-serif-4/400.css";
  import "@fontsource/source-serif-4/500.css";
  import "@fontsource/source-serif-4/600.css";
  import "@fontsource/inter-tight/400.css";
  import "@fontsource/inter-tight/500.css";
  import "@fontsource/inter-tight/600.css";
  import { ClientRouter } from "astro:transitions";
  import Footer from "../components/Footer.astro";
  import ThemeToggle from "../components/ThemeToggle.astro";
  import "../styles/global.css";

  type Props = {
    title: string;
    albumTitle: string;
    description: string;
    dateRange: string;
    photoCount: number;
  };

  const { title, albumTitle, description, dateRange, photoCount } = Astro.props;
---
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{title}</title>

    <script is:inline>
      const theme = localStorage.getItem("theme") || "system";

      function shouldUseDarkMode(themeValue) {
        if (themeValue === "dark") return true;
        if (themeValue === "light") return false;
        return window.matchMedia("(prefers-color-scheme: dark)").matches;
      }

      if (shouldUseDarkMode(theme)) {
        document.documentElement.classList.add("dark");
      }

      document.addEventListener("astro:before-swap", (e) => {
        const savedTheme = localStorage.getItem("theme") || "system";
        if (shouldUseDarkMode(savedTheme)) {
          e.newDocument.documentElement.classList.add("dark");
        } else {
          e.newDocument.documentElement.classList.remove("dark");
        }
      });
    </script>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#faf8f5">
    <ClientRouter/>
  </head>
  <body
    class="flex flex-col bg-paper dark:bg-paper_dark text-ink-700 dark:text-ink_dark-200 min-h-screen transition-colors duration-300"
  >
    <!-- Minimal Header -->
    <header
      class="sticky top-0 z-40 bg-paper/95 dark:bg-paper_dark/95 backdrop-blur-sm border-b border-border/30 dark:border-border-dark/30 transition-colors duration-300"
    >
      <div class="max-w-6xl mx-auto px-6 py-4">
        <div class="flex items-center justify-between">
          <a
            href="/photos"
            class="inline-flex items-center gap-2 text-sm text-ink-500 dark:text-ink_dark-400 hover:text-accent dark:hover:text-accent_dark transition-colors font-sans"
          >
            <svg
              class="w-4 h-4"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15 19l-7-7 7-7"
              />
            </svg>
            All albums
          </a>
          <ThemeToggle/>
        </div>
      </div>
    </header>

    <!-- Album Header -->
    <div class="max-w-6xl mx-auto px-6 pt-12 pb-8">
      <header class="max-w-3xl">
        <h1
          class="text-4xl md:text-5xl font-normal text-ink dark:text-ink_dark tracking-tight mb-4"
        >
          {albumTitle}
        </h1>
        <p
          class="text-lg text-ink-600 dark:text-ink_dark-300 leading-relaxed mb-4"
        >
          {description}
        </p>
        <div
          class="flex flex-wrap items-center gap-4 text-sm text-ink-400 dark:text-ink_dark-500 font-sans"
        >
          <span class="flex items-center gap-1.5">
            <svg
              class="w-4 h-4"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
              />
            </svg>
            {dateRange}
          </span>
          <span class="flex items-center gap-1.5">
            <svg
              class="w-4 h-4"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
              />
            </svg>
            {`${photoCount} photos`}
          </span>
        </div>
      </header>
    </div>

    <!-- Gallery (wider than standard content) -->
    <main class="flex-grow max-w-6xl mx-auto px-6 pb-16 w-full">
      <slot/>
    </main>

    <Footer maxWidth="wide"/>
  </body>
</html>
