---
  import { getCollection, render } from "astro:content";
  import ReadingLayout from "../../layouts/reading-layout.astro";

  export async function getStaticPaths() {
    const posts = await getCollection(
      "blog",
      ({ data }) => import.meta.env.DEV || !data.draft
    );
    return posts.map((pst) => ({
      params: { slug: pst.id },
      props: { post: pst },
    }));
  }

  const { post } = Astro.props;
  const { Content: PostContent } = await render(post);
---
<ReadingLayout
  title={post.data.title}
  description={post.data.description}
  pubDate={post.data.pubDate}
>
  <PostContent/>
</ReadingLayout>
