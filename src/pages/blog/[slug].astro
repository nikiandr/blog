---
  import { getCollection, render } from "astro:content";
  import BlogList from "../../components/BlogList.astro";
  import Content from "../../components/Content.astro";
  import Layout from "../../layouts/layout.astro";

  export async function getStaticPaths() {
    const posts = await getCollection("blog", ({ data }) => !data.draft);
    return posts.map((pst) => ({
      params: { slug: pst.id },
      props: { post: pst },
    }));
  }

  const { post } = Astro.props;
  const { Content: PostContent } = await render(post);

  const title = `${post.data.title} | Nikita Fordui`;
---
<Layout title={title}>
  <BlogList slot="list-panel" currentSlug={post.id}/>

  <div class="mb-10">
    <p
      class="text-sm uppercase tracking-wider text-davy_gray/70 dark:text-silver_gray-700 mb-6 transition-colors duration-300"
    >
      {post.data.pubDate.toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      })}
    </p>
    <h1
      class="text-6xl md:text-7xl font-light text-payne_gray dark:text-silver_gray leading-[1.1] mb-6 transition-colors duration-300"
    >
      {post.data.title}
    </h1>
    {post.data.description && (
      <p class="text-2xl font-light text-davy_gray dark:text-silver_gray-500 leading-relaxed max-w-3xl transition-colors duration-300">
        {post.data.description}
      </p>
    )}
  </div>

  <Content>
    <div class="prose">
      <PostContent/>
    </div>
  </Content>
</Layout>
