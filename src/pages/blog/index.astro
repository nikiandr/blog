---
import { getCollection } from "astro:content";
import Content from "../../components/Content.astro";
import Layout from "../../layouts/layout.astro";

const title = "Blog | Nikita Fordui";
const allBlogPosts = await getCollection("blog", ({ data }) => !data.draft);
---
<Layout title={title}>
  <div class="mb-10">
    <h1
      class="text-6xl md:text-7xl font-light text-payne_gray dark:text-silver_gray leading-[1.1] transition-colors duration-300"
    >
      Blog
    </h1>
  </div>

  <Content>
    {allBlogPosts.length === 0 ? (
      <p class="text-lg text-davy_gray dark:text-silver_gray-500">No blog posts yet.</p>
    ) : (
      <ul class="space-y-0 list-none">
        {allBlogPosts.map((post, index) => (
          <li class="group">
            <a 
              href={`/blog/${post.id}`}
              class="block -mx-4 px-4 py-8 rounded-lg hover:bg-platinum/10 dark:hover:bg-slate_border/20 transition-all duration-300"
            >
              <div class="mb-3">
                <time 
                  datetime={post.data.pubDate.toISOString()}
                  class="text-xs uppercase tracking-wider text-davy_gray/60 dark:text-silver_gray-700 block mb-3"
                >
                  {post.data.pubDate.toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'short', 
                    day: 'numeric' 
                  })}
                </time>
                <h2 class="text-3xl font-light text-payne_gray dark:text-silver_gray group-hover:text-thistle dark:group-hover:text-midnight_purple transition-colors duration-300 leading-tight mb-3">
                  {post.data.title}
                </h2>
              </div>
              <p class="text-lg text-davy_gray dark:text-silver_gray-500 leading-relaxed">
                {post.data.description}
              </p>
            </a>
            {index < allBlogPosts.length - 1 && (
              <hr class="border-t border-platinum/30 dark:border-slate_border/40 my-2" />
            )}
          </li>
        ))}
      </ul>
    )}
  </Content>
</Layout>
