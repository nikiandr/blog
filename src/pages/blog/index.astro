---
import { getCollection } from 'astro:content';
import Content from "../../components/content.astro";
import Layout from "../../layouts/layout.astro";

const title = "Blog | nfordui";
const allBlogPosts = await getCollection('blog', ({ data }) => !data.draft);
---
<Layout title={title}>
  <div class="text-center mb-12">
    <h1 class="text-5xl font-light text-payne_gray mb-4 leading-snug">
      Blog
    </h1>
  </div>

  <Content>
    {allBlogPosts.length === 0 ? (
      <p>No blog posts yet.</p>
    ) : (
      <ul class="space-y-0 list-none">
        {allBlogPosts.map((post, index) => (
          <li class="group">
            <a 
              href={`/blog/${post.id}`}
              class="block -mx-4 px-4 py-6 rounded-lg hover:bg-platinum/10 dark:hover:bg-slate_border/20 transition-all duration-200"
            >
              <div class="mb-3">
                <h2 class="text-xl font-light text-payne_gray dark:text-silver_gray group-hover:text-thistle dark:group-hover:text-midnight_purple transition-colors duration-200 leading-tight mb-1">
                  {post.data.title}
                </h2>
                <time 
                  datetime={post.data.pubDate.toISOString()}
                  class="text-sm text-davy_gray/60 dark:text-silver_gray-700 block"
                >
                  {post.data.pubDate.toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'short', 
                    day: 'numeric' 
                  })}
                </time>
              </div>
              <p class="text-base text-davy_gray dark:text-silver_gray-500 leading-relaxed">
                {post.data.description}
              </p>
            </a>
            {index < allBlogPosts.length - 1 && (
              <hr class="border-t border-platinum/30 dark:border-slate_border/40" />
            )}
          </li>
        ))}
      </ul>
    )}
  </Content>
</Layout>