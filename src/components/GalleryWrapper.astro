---
import type { ImageMetadata } from "astro";
import { transformImageToGalleryImage } from "../libs/gallery/transform";
import { Gallery } from "./react/Gallery";

type Props = {
  images: { photo: ImageMetadata; description: string }[];
  class?: string;
};

const { images, class: className } = Astro.props;

// Transform all images to gallery format
const galleryImages = await Promise.all(
  images.map(async ({ photo, description }) =>
    transformImageToGalleryImage(photo, description)
  )
);
---

<Gallery client:only="react" images={galleryImages} className={className} />

